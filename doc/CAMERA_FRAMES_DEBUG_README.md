# Camera Frames Debug - –û—Ç–ª–∞–¥–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–µ—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–º–µ—Ä—ã

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–∞–º–µ—Ä—ã –≤ ROS bag —Ñ–∞–π–ª–∞—Ö. 
–û–Ω –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–≤–ª–µ—á—å –º–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å—ä–µ–º–∫–∏ –∫–∞–¥—Ä–æ–≤ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è 
–ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ä–∞–±–æ—Ç—ã –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –ü–û (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–æ—Ç–æ–≥—Ä–∞–º–º–µ—Ç—Ä–∏–∏).

## –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —Ç–æ–ø–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–æ–ø–∏–∫–∏ –∫–∞–º–µ—Ä—ã:
- **`/mavros/cam_imu_sync/cam_imu_stamp`** (—Ç–∏–ø `mavros_msgs/CamIMUStamp`)
  - –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —Å—ä–µ–º–∫–∏ –∫–∞–¥—Ä–∞
  
- **`/mavros/statustext/send`** (—Ç–∏–ø `mavros_msgs/StatusText`)
  - –°–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è —Ñ–∞–π–ª–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è)

### –¢–æ–ø–∏–∫–∏ –æ–¥–æ–º–µ—Ç—Ä–∏–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ø–∏–∫–∏ —Ç–∏–ø–∞ `Odometry`
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –¥—Ä–æ–Ω–∞ –≤ –º–æ–º–µ–Ω—Ç —Å—ä–µ–º–∫–∏

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–ê–Ω–∞–ª–∏–∑ —Ç–æ–ø–∏–∫–æ–≤** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–ø–∏–∫–∏ –≤ bag —Ñ–∞–π–ª–µ
2. **–ü–æ–∏—Å–∫ –æ–¥–æ–º–µ—Ç—Ä–∏–∏** - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ç–æ–ø–∏–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –ø–æ–∑–∏—Ü–∏–∏
3. **–û—Ç–ª–∞–¥–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–∞–º–µ—Ä—ã** - –¥–µ—Ç–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
   - –°—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–æ–±—â–µ–Ω–∏–π cam_imu_stamp
   - –°—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–æ–±—â–µ–Ω–∏–π statustext
   - –í—Ä–µ–º–µ–Ω–Ω—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é –º–µ–∂–¥—É –Ω–∏–º–∏
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞–Ω–∞–ª–∏–∑ –≤ JSON

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
python3 camera_frames_debug.py
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç:
1. –ü—É—Ç—å –∫ ROS bag —Ñ–∞–π–ª—É
2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
3. –ù—É–∂–Ω–æ –ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ JSON

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
üìä –ê–ù–ê–õ–ò–ó –¢–û–ü–ò–ö–û–í –í BAG –§–ê–ô–õ–ï
================================================================================
üì¶ –§–∞–π–ª: my_flight.bag
üïê –ù–∞—á–∞–ª–æ: 2025-10-11 14:23:45
üïë –ö–æ–Ω–µ—Ü: 2025-10-11 14:28:12
‚è±Ô∏è  –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 267.34 —Å–µ–∫

üîç –û–¢–õ–ê–î–ö–ê –°–û–û–ë–©–ï–ù–ò–ô –ö–ê–ú–ï–†–´
================================================================================
‚úì –¢–æ–ø–∏–∫ /mavros/cam_imu_sync/cam_imu_stamp: –ù–ê–ô–î–ï–ù
  –¢–∏–ø: mavros_msgs/CamIMUStamp
  –°–æ–æ–±—â–µ–Ω–∏–π: 145

‚úì –¢–æ–ø–∏–∫ /mavros/statustext/send: –ù–ê–ô–î–ï–ù
  –¢–∏–ø: mavros_msgs/StatusText
  –°–æ–æ–±—â–µ–Ω–∏–π: 312

üì∏ CAM_IMU_SYNC –°–û–û–ë–©–ï–ù–ò–Ø:
[1] –í—Ä–µ–º—è bag: 2025-10-11 14:24:15.123456
    frame_stamp: 1728648255.123456
    frame_seq_id: 1
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π:

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
2. **–°–æ–∑–¥–∞—Ç—å –ø–∞—Ä—Å–µ—Ä** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
   - Timestamp –∫–∞–¥—Ä–∞
   - –ò–º—è —Ñ–∞–π–ª–∞
   - –ü–æ–∑–∏—Ü–∏—è –∏–∑ –æ–¥–æ–º–µ—Ç—Ä–∏–∏ (X, Y, Z)
   - –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è (quaternion –∏–ª–∏ euler —É–≥–ª—ã)
3. **–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞**:
   - CSV (–ø—Ä–æ—Å—Ç–æ—Ç–∞, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å)
   - JSON (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)
   - TXT (–¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –ü–û)
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Agisoft/Pix4D)

## –í–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 1: CSV
```csv
timestamp,filename,x,y,z,qx,qy,qz,qw
1728648255.123,IMG_0001.jpg,123.45,678.90,12.34,0.1,0.2,0.3,0.9
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: JSON
```json
{
  "frames": [
    {
      "timestamp": 1728648255.123,
      "filename": "IMG_0001.jpg",
      "position": {"x": 123.45, "y": 678.90, "z": 12.34},
      "orientation": {"qx": 0.1, "qy": 0.2, "qz": 0.3, "qw": 0.9}
    }
  ]
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Agisoft format (XML/TXT)
```xml
<photo label="IMG_0001.jpg">
  <center>123.45 678.90 12.34</center>
  <rotation>0.1 0.2 0.3 0.9</rotation>
</photo>
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è
–°–∫—Ä–∏–ø—Ç –∏—â–µ—Ç –ø–∞—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π cam_imu_stamp –∏ statustext, –∫–æ—Ç–æ—Ä—ã–µ:
- –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 1 —Å–µ–∫—É–Ω–¥—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- –ò–º–µ—é—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É –≤–æ –≤—Ä–µ–º–µ–Ω–∏

### –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏
–î–ª—è —Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∫–∞–¥—Ä–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è:
- –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–¥–æ–º–µ—Ç—Ä–∏–∏
- –£—á–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ–º –∑–∞—Ç–≤–æ—Ä–∞ –∏ –∑–∞–ø–∏—Å—å—é

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.x
- rosbag
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

## –ê–≤—Ç–æ—Ä

–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ rosbag_to_las
